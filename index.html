<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BEST OF LUCK DIAMOND TOP UP</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fff;
      padding: 20px;
      color: #222;
      max-width: 600px;
      margin: auto;
    }
    h2 {
      text-align: center;
      color: #2c3e50;
    }
    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: bold;
    }
    select, input[type="text"], input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-bottom: 15px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 1em;
    }
    button {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
      width: 100%;
      margin-top: 10px;
    }
    button:hover {
      background-color: #2980b9;
    }
    #loadingSpinner {
      display: none;
      text-align: center;
      margin-top: 15px;
    }
    #thankYouMessage {
      color: green;
      font-weight: bold;
      margin-top: 15px;
      text-align: center;
      display: none;
    }
    /* অর্ডার হিস্টোরি */
    #orderHistoryContainer {
      margin-top: 40px;
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      max-height: 300px;
      overflow-y: auto;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      font-family: monospace;
      white-space: pre-wrap;
      color: #444;
    }
    #orderHistoryTitle {
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 10px;
      color: #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #clearHistoryBtn {
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9em;
    }
    #clearHistoryBtn:hover {
      background-color: #c0392b;
    }
  </style>
</head>
<body>
  <h2>BEST OF LUCK DIAMOND TOP UP</h2>

  <form id="orderForm">

    <label for="diamondPackage">ডায়মন্ড প্যাকেজ (Diamond Package):</label>
    <select id="diamondPackage" required>
      <option value="">-- প্যাকেজ নির্বাচন করুন --</option>
      <option value="10 Diamonds - ৳100">10 Diamonds - ৳100</option>
      <option value="20 Diamonds - ৳180">20 Diamonds - ৳180</option>
      <option value="50 Diamonds - ৳400">50 Diamonds - ৳400</option>
    </select>

    <label for="levelUpPackage">লেভেল আপ প্যাকেজ (Level Up Package):</label>
    <select id="levelUpPackage" required>
      <option value="">-- প্যাকেজ নির্বাচন করুন --</option>
      <option value="Level 1 - ৳50">Level 1 - ৳50</option>
      <option value="Level 2 - ৳90">Level 2 - ৳90</option>
      <option value="Level 3 - ৳150">Level 3 - ৳150</option>
    </select>

    <label for="monthlyPackage">ম্যান্থলি প্যাকেজ (Monthly Package):</label>
    <select id="monthlyPackage" required>
      <option value="">-- প্যাকেজ নির্বাচন করুন --</option>
      <option value="1 Month - ৳300">1 Month - ৳300</option>
      <option value="3 Months - ৳850">3 Months - ৳850</option>
      <option value="6 Months - ৳1600">6 Months - ৳1600</option>
    </select>

    <label for="weeklyPackage">উইকলি প্যাকেজ (Weekly Package):</label>
    <select id="weeklyPackage" required>
      <option value="">-- প্যাকেজ নির্বাচন করুন --</option>
      <option value="1 Week - ৳100">1 Week - ৳100</option>
      <option value="2 Weeks - ৳180">2 Weeks - ৳180</option>
      <option value="4 Weeks - ৳350">4 Weeks - ৳350</option>
    </select>

    <label for="userName">আপনার নাম (Your Name):</label>
    <input type="text" id="userName" placeholder="আপনার নাম লিখুন" required />

    <label for="phoneNumber">মোবাইল নম্বর (Phone Number):</label>
    <input type="text" id="phoneNumber" placeholder="01XXXXXXXXX" pattern="01[0-9]{9}" required />

    <!-- ক্যাপচা -->
    <label for="captchaInput">ক্যাপচা লিখুন (Captcha):</label>
    <div style="display:flex; align-items:center; margin-bottom:10px;">
      <div id="captcha" style="background:#ddd; padding:8px 12px; font-weight:bold; font-size:20px; user-select:none; border-radius:5px; margin-right:10px; letter-spacing: 4px;"></div>
      <button type="button" id="refreshCaptcha" title="ক্যাপচা রিফ্রেশ করুন" style="background:#27ae60; color:#fff; border:none; padding:8px 12px; border-radius:5px; cursor:pointer;">↻</button>
    </div>
    <input type="text" id="captchaInput" placeholder="ক্যাপচা কোড লিখুন" required />

    <button type="submit" id="submitBtn">অর্ডার করুন</button>

  </form>

  <div id="loadingSpinner">অর্ডার প্রসেসিং...</div>
  <div id="thankYouMessage">অর্ডার সফল হয়েছে, ধন্যবাদ! মাসুদের পক্ষ থেকে শুভকামনা</div>

  <!-- অর্ডার হিস্টোরি -->
  <div id="orderHistoryContainer">
    <div id="orderHistoryTitle">
      <span>আপনার অর্ডার হিস্টোরি:</span>
      <button id="clearHistoryBtn" title="হিস্টোরি ক্লিয়ার করুন">মুছে ফেলুন</button>
    </div>
    <pre id="orderHistoryContent">এখনও কোনো অর্ডার করা হয়নি।</pre>
  </div>

<script>
  // ক্যাপচা জেনারেট করার ফাংশন
  function generateCaptcha() {
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    let captcha = '';
    for(let i=0; i<6; i++) {
      captcha += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    document.getElementById('captcha').textContent = captcha;
  }

  // পেজ লোড হলে ক্যাপচা জেনারেট
  window.onload = function() {
    generateCaptcha();
    loadOrderHistory();
  }

  // ক্যাপচা রিফ্রেশ বাটন
  document.getElementById('refreshCaptcha').addEventListener('click', function(){
    generateCaptcha();
  });

  // অর্ডার হিস্টোরি লোড
  function loadOrderHistory() {
    const historyContent = document.getElementById('orderHistoryContent');
    let history = localStorage.getItem('orderHistory');
    if(history) {
      historyContent.textContent = history;
    } else {
      historyContent.textContent = 'এখনও কোনো অর্ডার করা হয়নি।';
    }
  }

  // অর্ডার হিস্টোরিতে যোগ করা
  function addOrderToHistory(orderText) {
    let history = localStorage.getItem('orderHistory');
    if(history) {
      history += '\n\n-------------------------\n\n' + orderText;
    } else {
      history = orderText;
    }
    localStorage.setItem('orderHistory', history);
    loadOrderHistory();
  }

  // হিস্টোরি ক্লিয়ার করার ফাংশন
  document.getElementById('clearHistoryBtn').addEventListener('click', function() {
    if(confirm('আপনি কি নিশ্চিত অর্ডার হিস্টোরি মুছে ফেলতে চান?')) {
      localStorage.removeItem('orderHistory');
      loadOrderHistory();
    }
  });

  // ফর্ম সাবমিট ইভেন্ট
  document.getElementById('orderForm').addEventListener('submit', function(e){
    e.preventDefault();

    // ভ্যালিডেশন
    const diamondPackage = document.getElementById('diamondPackage').value;
    const levelUpPackage = document.getElementById('levelUpPackage').value;
    const monthlyPackage = document.getElementById('monthlyPackage').value;
    const weeklyPackage = document.getElementById('weeklyPackage').value;
    const userName = document.getElementById('userName').value.trim();
    const phoneNumber = document.getElementById('phoneNumber').value.trim();
    const captchaInput = document.getElementById('captchaInput').value.trim();
    const captchaDisplayed = document.getElementById('captcha').textContent.trim();

    if(!diamondPackage || !levelUpPackage || !monthlyPackage || !weeklyPackage) {
      alert('সব প্যাকেজ নির্বাচন করুন।');
      return;
    }
    if(userName === '') {
      alert('আপনার নাম লিখুন।');
      return;
    }
    if(!/^01[0-9]{9}$/.test(phoneNumber)) {
      alert('সঠিক মোবাইল নম্বর লিখুন।');
      return;
    }
    if(captchaInput !== captchaDisplayed) {
      alert('ক্যাপচা কোড মিলছে না, আবার চেষ্টা করুন।');
      generateCaptcha();
      return;
    }

    // লোডিং দেখান
    document.getElementById('loadingSpinner').style.display = 'block';
    document.getElementById('thankYouMessage').style.display = 'none';
    this.querySelector('button[type="submit"]').disabled = true;

    // মেসেজ তৈরি
    let message = `BEST OF LUCK DIAMOND TOP UP\n\n`;
    message += `ডায়মন্ড প্যাকেজ: ${diamondPackage}\n`;
    message += `লেভেল আপ প্যাকেজ: ${levelUpPackage}\n`;
    message += `ম্যান্থলি প্যাকেজ: ${monthlyPackage}\n`;
    message += `উইকলি প্যাকেজ: ${weeklyPackage}\n\n`;
    message += `নাম: ${userName}\n`;
    message += `মোবাইল নম্বর: ${phoneNumber}\n`;

    // একটু ডিলে দিয়ে অর্ডার সম্পন্নের ধরণ
    setTimeout(() => {
      // লোকালস্টোরেজে সংরক্ষণ
      addOrderToHistory(message);

      // লোডিং হাইড, থ্যাংক ইউ দেখান
      document.getElementById('loadingSpinner').style.display = 'none';
      document.getElementById('thankYouMessage').style.display = 'block';

      // হোয়াটসঅ্যাপ লিঙ্ক
      const whatsappUrl = `https://wa.me/8801580495595?text=${encodeURIComponent(message)}`;
      window.open(whatsappUrl, '_blank');

      // ফর্ম রিসেট
      document.getElementById('orderForm').reset();
      generateCaptcha();
      this.querySelector('button[type="submit"]').disabled = false;
    }, 1500);

  });
</script>
</body>
</html>
